# README

The ELCFS Pipeline predicts protein complexes by modeling protein-protein interactions and assigning scores to various
protein pairs using available association and expression data. The pipeline constructs weighted graphs and identifies
clusters characterized by high node connectivity and subgraph cohesion.

### Overview

The pipeline uses a voting classifier committee to assign an interaction score to a protein pair by calculating the
weighted mean of feature-partition-based Random Forest models. As the feature composition grows, the pipeline integrates
more protein association and expression data.

### Repository Organization

The repository is structured into the following main directories:

1. **`elcfs_protein_complex_modeling/`**: The main directory containing all critical files for the pipeline.
    - **`assemblyData/`**: Stores temporary and intermediate data related to the assembly of protein complexes.
    - **`featureData/`**: Contains both protein-level and pair-level feature matrices.
    - **`dataPartitions/`**: Holds partitioned datasets used for cross-validation, training, or testing.
    - **`modelPerformance/`**: Stores evaluation metrics such as precision, recall, and F1 scores from trained models.
    - **`predictions/`**: Directory for interaction scores and predictions generated by models.
    - **`complexPredictions/`**: Stores predicted protein complexes based on interaction scores.
    - **`results/`**: Contains final results, including figures and CSV files for analysis or publication.
    - **`srcData/`**: Contains source data used to construct the feature matrix.
    - **`models/`**: Directory where all trained models are saved for reuse.
    - **`general/`**: A directory for files that don’t fit neatly into other categories.
    - **`cellSpecific_complexDifferences/`**: Stores results and data specific to cell-line-based protein complex
      analysis.
    - **`staging/`**: Contains scripts and temporary files for development and testing.
      analysis.
    - **`CFinder-2.0.6--1448/`**: Includes the Markov Clustering Algorithm (MCL) for clustering protein interactions.
    - **`google_colab_notebooks/`**: Contains Jupyter notebooks for running the pipeline in Google Colab.
    - **`utils/`**: Contains Python libraries.

---

### Notebooks: Inputs and Outputs

- **`1. Construct feature matrix.ipynb`**
    - **Purpose**: Combines pair sets and data sources to construct the feature matrix.
    - **Inputs**:
        - Source data from `srcData/`.
        - Pair sets (stored within `assemblyData/`).
    - **Outputs**:
        - Feature matrix (saved in `featureData/`).

- **`2. Build models.ipynb`**
    - **Purpose**: Trains Random Forest models using the feature matrix.
    - **Inputs**:
        - Feature matrix from `1. Construct feature matrix.ipynb`.
        - Data partitions from `dataPartitions/`.
    - **Outputs**:
        - Trained models (saved in `models/`).
        - Performance metrics (saved in `modelPerformance/`).

- **`3. Make predictions.ipynb`**
    - **Purpose**: Generates interaction scores for protein pairs.
    - **Inputs**:
        - Trained models from `2. Build models.ipynb`.
        - Feature matrix from `1. Construct feature matrix.ipynb`.
    - **Outputs**:
        - Interaction scores (saved in `predictions/`).

- **`4. Make predictions-CellSpecific.ipynb`**
    - **Purpose**: Generates cell-specific interaction scores using trained models.
    - **Inputs**:
        - Trained models from `2. Build models.ipynb`.
        - Cell-specific feature matrix.
    - **Outputs**:
        - Cell-specific interaction scores (saved in `complexPredictions/`).

- **`5. Generate complexes.ipynb`**
    - **Purpose**: Predicts protein complexes using interaction scores.
    - **Inputs**:
        - Interaction scores from `3. Make predictions.ipynb` and `4. Make predictions-CellSpecific.ipynb`.
    - **Outputs**:
        - Predicted protein complexes (saved in `complexPredictions/`).

- **`6. Evaluate complexes helper.ipynb`**
    - **Purpose**: Prepares data for evaluating protein complex predictions.
    - **Inputs**:
        - Predicted protein complexes from `5. Generate complexes.ipynb`.
    - **Outputs**:
        - Evaluation metrics (saved in `modelPerformance/`).

- **`7. Analyze Results.ipynb`**
    - **Purpose**: Analyzes and presents results, including figures and tables.
    - **Inputs**:
        - Evaluation metrics from `6. Evaluate complexes helper.ipynb`.
    - **Outputs**:
        - Final results (saved in `results/`).

---

### Google Colab Instructions

To run the pipeline on Google Colab:

1. Open Google Colab: [Google Colab](https://colab.research.google.com/)
2. Select "File" > "Open Notebook."
3. Use the "GitHub" tab to search for the repository: `GaryWilkins/elcfs_protein_complex_modeling`.
4. Execute the notebooks in the listed order.

**Note**:

- The root directory for data is set to `/content/drive/My Drive/` in Colab. Make sure this directory is set correctly
  to access your data.
- Save outputs before disconnecting from Colab, as it does not provide persistent storage.
- Colab’s free-tier resources may be limited for large computations, so a subscription may be required.
- GitHub repository limits cannot accommodate all the files both required and generated by the pipeline. This directory may be accessed [here](hhttps://drive.google.com/drive/folders/1XJT3ZnSHQyPzV-iBqMbP6rKTEPERu4NS?usp=drive_link).

---

### References

**Data Sources**:

- Protein Association Data:
    - BioPlex 3.0 (Huttlin et al., 2017)
    - hu.MAP 1.0, 2.0 (Drew et al., 2017; Huttlin et al., 2021)

- Protein Expression Data:
    - FANTOM5 (Lizio et al., 2015)
    - GTEx (v7) (GTEx Consortium, 2017)
    - Lugo-Martinez et al., 2019 & 2021
    - SubCellBarCode (Baran-Gale et al., 2020)
    - Uhlén et al., 2015

**Software**:

- hu.MAP 2.0: [humap2.proteincomplexes.org](http://humap2.proteincomplexes.org/)
- ClusterOne: [ClusterOne Tool](https://paccanarolab.org/cluster-one/)
- MCL -- Markov Clustering Algorithm: [MCL Tool](https://micans.org/mcl/)

