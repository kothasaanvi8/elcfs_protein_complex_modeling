# README

The ELCFS Pipeline predicts protein complexes by modeling protein-protein interactions and assigning scores to various
protein pairs using available association and expression data. The pipeline constructs weighted graphs and identifies
clusters characterized by high node connectivity and subgraph cohesion.

### Overview

The pipeline uses a voting classifier committee to assign an interaction score to a protein pair by calculating the
weighted mean of feature-partition-based Random Forest models. As the feature composition grows, the pipeline integrates
more protein association and expression data.

### Organization for public Google Drive directory with complete data, script library, and google colab notebooks

The repository is structured into the following main directories:

- **`assemblyData/`**: Intermediate data generated to facilitate and evaluate protein complex predictions.
- **`featureData/`**: Features generated from association and protein-expression data.
- **`dataPartitions/`**: Five-fold partitioned datasets generated for cross-validation training and testing.
- **`modelPerformance/`**: Model evaluation metrics, e.g., precision, recall, and F1 scores.
- **`predictions/`**: Pairwise interaction scores.
- **`complexPredictions/`**: Protein complex predictions.
- **`manuscriptGraphics/`**: Final results, including figures and CSV files from manuscript.
- **`srcData/`**: Source data for feature matrix.
- **`models/`**: Trained models.
- **`CFinder-2.0.6--1448/`**: Markov Clustering Algorithm (MCL) for clustering protein interactions.
- **`google_colab_notebooks/`**: Jupyter notebooks to run the pipeline in Google Colab.
- **`utils/`**: Python scripts.

---

### Notebooks: Inputs and Outputs

- **`1. Construct feature matrix.ipynb`**
    - **Purpose**: Construct feature matrix from pair sets and features derived from data sources.
    - **Inputs**:
        - Source data from `srcData/*`.
        - Pair sets from `setup/*`.
    - **Outputs**:
        - Feature matrix (saved in `featureData/`).

- **`2. Build models.ipynb`**
    - **Purpose**: Trains Random Forest models using the feature matrix.
    - **Inputs**:
        - Feature matrix from `1. Construct feature matrix.ipynb`.
        - Data partitions from `dataPartitions/*`.
    - **Outputs**:
        - Trained models (saved in `models/*`).
        - Performance metrics (saved in `modelPerformance/*`).

- **`3. Make predictions.ipynb`**
    - **Purpose**: Generates interaction scores for protein pairs.
    - **Inputs**:
        - Trained models from `2. Build models.ipynb`.
        - Feature matrix from `1. Construct feature matrix.ipynb`.
    - **Outputs**:
        - Interaction scores (saved in `predictions/*`).

- **`4. Make predictions-CellSpecific.ipynb`**
    - **Purpose**: Generates cell-specific interaction scores using trained models.
    - **Inputs**:
        - Trained models from `2. Build models.ipynb`.
        - Cell-specific feature matrix.
    - **Outputs**:
        - Cell-specific interaction scores (saved in `complexPredictions/*`).

- **`5. Generate complexes.ipynb`**
    - **Purpose**: Predicts protein complexes using interaction scores.
    - **Inputs**:
        - Interaction scores from `3. Make predictions.ipynb` and `4. Make predictions-CellSpecific.ipynb`.
    - **Outputs**:
        - Predicted protein complexes (saved in `complexPredictions/*`).

- **`6. Evaluate complexes helper.ipynb`**
    - **Purpose**: Prepares data for evaluating protein complex predictions.
    - **Inputs**:
        - Predicted protein complexes from `5. Generate complexes.ipynb`.
    - **Outputs**:
        - Evaluation metrics (saved in `modelPerformance/*`).

- **`7. Analyze Results.ipynb`**
    - **Purpose**: Analyzes and presents results, including figures and tables.
    - **Inputs**:
        - Evaluation metrics from `6. Evaluate complexes helper.ipynb`.
    - **Outputs**:
        - Final results (saved in `results/*`).

---

### Google Colab Instructions

To run the pipeline on Google Colab:

1. Open Google Colab: [Google Colab](https://colab.research.google.com/)
2. Select "File" > "Open Notebook."
3. Use the "GitHub" tab to search for the repository: `GaryWilkins/elcfs_protein_complex_modeling`.
4. Execute the notebooks in the listed order.

**Note**:

- The root directory for data is set to `/content/drive/My Drive/` in Colab. Make sure this directory is set correctly
  to access your data.
- Save outputs before disconnecting from Colab, as it does not provide persistent storage.
- Colab’s free-tier resources may be limited for large computations, so a subscription may be required.
- GitHub repository limits cannot accommodate all the files both required and generated by the pipeline. This directory
  may be accessed [here](https://drive.google.com/drive/folders/1OEa0NVYCYnhOZmRa_pycIlpNx9ySJIea?usp=sharing).
- ''

---

### References

**Data Sources**:

- Protein Association Data:
    - BioPlex 3.0 (Huttlin et al., 2017)
    - hu.MAP 1.0, 2.0 (Drew et al., 2017; Huttlin et al., 2021)

- Protein Expression Data:
    - FANTOM5 (Lizio et al., 2015)
    - GTEx (v7) (GTEx Consortium, 2017)
    - Lugo-Martinez et al., 2019 & 2021
    - SubCellBarCode (Baran-Gale et al., 2020)
    - Uhlén et al., 2015

**Software**:

- hu.MAP 2.0: [humap2.proteincomplexes.org](http://humap2.proteincomplexes.org/)
- ClusterOne: [ClusterOne Tool](https://paccanarolab.org/cluster-one/)
- MCL -- Markov Clustering Algorithm: [MCL Tool](https://micans.org/mcl/)

